// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Unlike TypeORM where entities are created and set inside the modules, 
// Prisma handles everything from this file where the models are set


generator client {
  provider = "prisma-client-js"
  // output   = "../node_modules/@prisma/client" 

}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id				Int				@id @default(autoincrement())

  createdAt	DateTime	@default(now())
  updatedAt	DateTime	@updatedAt

  email		 	String 		@unique
	username	String    @unique   
  hash			String
	picture		String?

	gamesWon		Int?
	gamesLost		Int?
	gamesPlayed	Int?
//game history ?

	friends		User[]		@relation(name: "relationships")
	blocked		User[]		@relation(name: "relationships")

  admin       Channel[] @relation("admin")
  member      Channel[] @relation("member")
  chanBlocked Channel[] @relation("blocked")

  @@map("users")    //mapped to another name
}


model Channel {
  id    Int     @id @default(autoincrement())

  name  String
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  private   Boolean
  password  String

  admins    User[]  @relation("admin")
  members   User[]  @relation("member")
  blocked   User[]  @relation("blocked")

}


